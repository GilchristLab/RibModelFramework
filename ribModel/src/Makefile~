# Makefile for CES library

CC = gcc
LIBS = -L/usr/lib/ -lm -lgsl -L/usr/lib/R/lib -lR
INCS = -I/usr/share/R/include -I /data/apps/R/3.0.1/lib64/R/include
#Flags for optimization
CFLAGS = -c -mtune=generic -O3 -Wall -fPIC $(INCS)
#Flags for debugging
#CFLAGS = -c -g -mtune=generic -Wall -fPIC $(INCS) 

OBJS = ribModel/src/Gene.o ribModel/src/Genome.o

all: $(OBJS)
	gcc -std=gnu99 -shared -o $(OBJS) $(LIBS)

ribModel/src/Gene.o: ribModel/src/Gene.cpp ribModel/include/Gene.h
	gcc -std=gnu99 $(CFLAGS) -pipe -c ribModel/src/Gene.cpp -o ribModel/src/Gene.o
	
ribModel/src/Genome.o: ribModel/src/Genome.cpp ribModel/include/Gene.h ribModel/include/Genome.h
	gcc -std=gnu99 $(CFLAGS) -pipe -c ribModel/src/Genome.cpp -o ribModel/src/Genome.o



#shared/iofuns.o: shared/iofuns_CES.c shared/iofuns_CES.h shared/CES_struct.h
#	$(CC) $(CFLAGS) -o shared/iofuns_CES.o shared/iofuns_CES.c $(LIBS)

